generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// Lead Extensions Table
model LeadExtension {
  id                   BigInt    @id @default(autoincrement())
  contactId            BigInt    @map("contact_id")
  leadNumber           String    @unique @map("lead_number") @db.VarChar(50)
  product              String?   @db.VarChar(255)
  loanAmountRequired   BigInt?   @map("loan_amount_required")
  location             String?   @db.VarChar(500)
  leadReferredBy       String?   @map("lead_referred_by") @db.VarChar(255)
  shortDescription     String?   @map("short_description") @db.Text
  leadAssignedTo       BigInt?   @map("lead_assigned_to")
  leadStatus           String?   @map("lead_status") @db.VarChar(50)
  businessDetails      Json?     @map("business_details") @db.JsonB
  propertyDetails      Json?     @map("property_details") @db.JsonB
  autoLoanDetails      Json?     @map("auto_loan_details") @db.JsonB
  machineryLoanDetails Json?     @map("machinery_loan_details") @db.JsonB
  createdAt            DateTime  @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt            DateTime  @updatedAt @map("updated_at") @db.Timestamp(6)

  @@map("lead_extensions")
  @@schema("custom_features")
}

// Business Details (if separated from JSON)
model BusinessDetail {
  id                  BigInt   @id @default(autoincrement())
  leadExtensionId     BigInt   @map("lead_extension_id")
  typeOfEmployment    String?  @map("type_of_employment") @db.VarChar(100)
  typeOfIndustry      String?  @map("type_of_industry") @db.VarChar(100)
  typeOfBusiness      String?  @map("type_of_business") @db.VarChar(100)
  constitution        String?  @db.VarChar(100)
  yearsInBusiness     Int?     @map("years_in_business")
  monthlyNetSalary    BigInt?  @map("monthly_net_salary")
  otherInfo           String?  @map("other_info") @db.Text
  createdAt           DateTime @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt           DateTime @updatedAt @map("updated_at") @db.Timestamp(6)

  @@map("business_details")
  @@schema("custom_features")
}

// Property Details
model PropertyDetail {
  id                      BigInt   @id @default(autoincrement())
  leadExtensionId         BigInt   @map("lead_extension_id")
  typeOfProperty          String?  @map("type_of_property") @db.VarChar(100)
  isNewPurchase           Boolean? @map("is_new_purchase")
  isBuilderPurchase       Boolean? @map("is_builder_purchase")
  isReadyPossession       Boolean? @map("is_ready_possession")
  classificationOfProperty String? @map("classification_of_property") @db.VarChar(100)
  propertyValue           BigInt?  @map("property_value")
  sellDeedValue           BigInt?  @map("sell_deed_value")
  areaOfProperty          Decimal? @map("area_of_property") @db.Decimal(10, 2)
  areaUnit                String?  @map("area_unit") @db.VarChar(20)
  ageOfProperty           Int?     @map("age_of_property")
  propertyAddress         String?  @map("property_address") @db.Text
  otherInfo               String?  @map("other_info") @db.Text
  createdAt               DateTime @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt               DateTime @updatedAt @map("updated_at") @db.Timestamp(6)

  @@map("property_details")
  @@schema("custom_features")
}

// Reminders
model Reminder {
  id        BigInt   @id @default(autoincrement())
  contactId BigInt   @map("contact_id")
  type      String   @db.VarChar(50) // 'birthday', 'loan_topup'
  dueDate   DateTime @map("due_date") @db.Date
  message   String   @db.Text
  status    String   @default("pending") @db.VarChar(20) // 'pending', 'sent', 'dismissed'
  sentAt    DateTime? @map("sent_at") @db.Timestamp(6)
  createdAt DateTime @default(now()) @map("created_at") @db.Timestamp(6)

  @@map("reminders")
  @@schema("custom_features")
}
